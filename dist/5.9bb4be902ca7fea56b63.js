(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{217:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var s=a(0),r=a.n(s),c=a(15),n=a(2),l=a.n(n),o=a(10),i=a(17);function u(){const[e,t]=Object(c.a)({searctTerm:"",results:[],show:"neither",requestCount:0}),a=Object(s.useContext)(o.a);function n(e){27===e.keyCode&&a({type:"closeSearch"})}return Object(s.useEffect)(()=>(document.addEventListener("keyup",n),()=>{document.removeEventListener("keyup",n)}),[]),Object(s.useEffect)(()=>{if(e.searctTerm.trim()){t(e=>{e.show="loading"});const e=setTimeout(()=>{t(e=>{e.requestCount++})},700);return()=>{clearTimeout(e)}}t(e=>{e.show="neither"})},[e.searctTerm]),Object(s.useEffect)(()=>{const a=l.a.CancelToken.source();return e.requestCount&&async function(){try{const s=await l.a.post("/search",{searchTerm:e.searctTerm},{cancelToken:a.token});t(e=>{e.results=s.data,e.show="results"})}catch(e){console.log(e.response.data)}}(),()=>{a.cancel()}},[e.requestCount]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-overlay-top shadow-sm"},r.a.createElement("div",{className:"container container--narrow"},r.a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("input",{autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?",onChange:function(e){const a=e.target.value;t(e=>{e.searctTerm=a})}}),r.a.createElement("span",{onClick:()=>a({type:"closeSearch"}),className:"close-live-search"},r.a.createElement("i",{className:"fas fa-times-circle"})))),r.a.createElement("div",{className:"search-overlay-bottom"},r.a.createElement("div",{className:"container container--narrow py-3"},r.a.createElement("div",{className:"circle-loader "+("loading"===e.show?"circle-loader--visible":"")}),r.a.createElement("div",{className:"live-search-results "+("results"===e.show?"live-search-results--visible":"")},Boolean(e.results.length)&&r.a.createElement("div",{className:"list-group shadow-sm"},r.a.createElement("div",{className:"list-group-item active"},r.a.createElement("strong",null,"Search Results")," (",e.results.length," ",1===e.results.length?"item":"items"," found)"),e.results.map(e=>r.a.createElement(i.a,{key:e._id,post:e,onClick:()=>a({type:"closeSearch"})}))),!Boolean(e.results.length)&&r.a.createElement("p",{className:"alert alert-danger text-center shadow-sm"},"Sorry we could not find any results for that search.")))))}}}]);